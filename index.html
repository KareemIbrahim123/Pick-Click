<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>Pick & Click</title>
  <style>
    #cart {
  max-height: 70vh;
  overflow-y: auto;
}
#cart-items li {
  margin-bottom: 10px;
  padding-bottom: 10px;
  border-bottom: 1px solid #0c3457;
}
    * {
      box-sizing: border-box;
    }
    body {
      font-family: "Helvetica Neue", sans-serif;
      background-color: white;
      margin: 0;
      padding: 20px;
      color: #1d1d1f;
    }
    h1 {
      text-align: center;
      margin-bottom: 40px;
      font-size: 32px;
    }
    .phone-container {
      display: flex;
      flex-wrap:wrap-reverse;
      justify-content: center;
      gap: 200px;
    }
    .phone {
      background-color: rgb(255, 255, 255);
      border-radius: 20px;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
      padding: 20px;
      width: 320px;
      text-align: center;
      transition: transform 0.3s;
    }
    .phone:hover {
      transform: translateY(-5px);
    }
    .phone img {
      width: 100%;
      height: auto;
      border-radius: 10px;
      margin-bottom: 15px;
    }
    .color-select {
      margin: 10px 0;
      padding: 5px;
      font-size: 16px;
    }
    .price {
      font-size: 18px;
      margin: 10px 0;
      font-weight: bold;
      color: #0071e3;
    }
    button {
      background-color: #0071e3;
      color: white;
      border: none;
      padding: 10px 25px;
      border-radius: 8px;
      font-size: 16px;
      cursor: pointer;
      transition: background-color 0.2s;
    }
    button:hover {
      background-color: #005bb5;
    }

    @media (max-width: 768px) {
      .phone-container {
        flex-direction: column;
        align-items: center;
      }
    }
  </style>
  <style>
    button:disabled {
      background-color: #cccccc !important;
      cursor: not-allowed !important;
    }
  </style>
</head>
<body>
  <button class="lang-toggle" onclick="toggleLang()">English</button>
  <h1 data-ar="Ø§Ø®ØªØ± Ù…ÙˆØ¨Ø§ÙŠÙ„Ùƒ Ø§Ù„Ù…ÙØ¶Ù„" data-en="Choose Your Favorite Phone">Ø§Ø®ØªØ± Ù…ÙˆØ¨Ø§ÙŠÙ„Ùƒ Ø§Ù„Ù…ÙØ¶Ù„</h1>
  <div class="phone-container">

    <!-- iPhone 15 -->
    <div class="phone">
      <img src="712i-Bxl8qL.jpg" alt="iPhone 15">
      <h2>
        <a href="product.html?model=iPhone%2015"
           data-ar="Ø¢ÙŠÙÙˆÙ† 15"
           data-en="iPhone 15"
           style="text-decoration: none; color: inherit;">
          iPhone 15
        </a>
      </h2>
      
      <select class="color-select" onchange="updatePrice(this, 'price1')">
        <option disabled selected value="" data-ar="Ø§Ø®ØªØ± Ø§Ù„Ù„ÙˆÙ†" data-en="Choose Color">Ø§Ø®ØªØ± Ø§Ù„Ù„ÙˆÙ†</option>
        <option value="Ø£Ø³ÙˆØ¯" data-ar="Ø£Ø³ÙˆØ¯" data-en="Black">Ø£Ø³ÙˆØ¯</option>
        <option value="Ø£Ø²Ø±Ù‚" data-ar="Ø£Ø²Ø±Ù‚" data-en="Blue">Ø£Ø²Ø±Ù‚</option>
        <option value="Ø£Ø­Ù…Ø±" data-ar="Ø£Ø­Ù…Ø±" data-en="Red">Ø£Ø­Ù…Ø±</option>
      </select>
      <select class="specs" onchange="updatePrice(this, 'price1', {'Ø£Ø³ÙˆØ¯': 43000, 'Ø£Ø²Ø±Ù‚': 44000, 'Ø£Ø­Ù…Ø±': 45000})">
        <option disabled selected value="" data-ar="Ø§Ø®ØªØ± Ø§Ù„Ø±Ø§Ù… ÙˆØ§Ù„Ù…Ø³Ø§Ø­Ø©" data-en="Choose RAM and Storage">Ø§Ø®ØªØ± Ø§Ù„Ø±Ø§Ù… ÙˆØ§Ù„Ù…Ø³Ø§Ø­Ø©</option>
        <option value="6GB/128GB">6GB / 128GB</option>
        <option value="8GB/256GB">8GB / 256GB</option>
      </select>
      <div id="price1" class="price" data-ar="Ø§Ù„Ø³Ø¹Ø±: -" data-en="Price: -">Ø§Ù„Ø³Ø¹Ø±: -</div>
      <button onclick="buyNow('iPhone 15')" data-ar="Ø´Ø±Ø§Ø¡ Ø§Ù„Ø¢Ù†" data-en="Buy Now">Ø´Ø±Ø§Ø¡ Ø§Ù„Ø¢Ù†</button>
    </div>

    <!-- iPhone 14 -->
    <div class="phone">
      <img src="iphone_14_blue-5_3.jpg" alt="iPhone 14">
      <h2>
        <a href="product.html?model=iPhone%2014"
           data-ar="Ø¢ÙŠÙÙˆÙ† 14"
           data-en="iPhone 14"
           style="text-decoration: none; color: inherit;">
          iPhone 14
        </a>
      </h2>
      <select class="color-select" onchange="updatePrice(this, 'price2', {'Ø£Ø³ÙˆØ¯': 39000, 'Ø£Ø¨ÙŠØ¶': 39500, 'Ø¨Ù†ÙØ³Ø¬ÙŠ': 40000})">
        <option disabled selected value="" data-ar="Ø§Ø®ØªØ± Ø§Ù„Ù„ÙˆÙ†" data-en="Choose Color">Ø§Ø®ØªØ± Ø§Ù„Ù„ÙˆÙ†</option>
        <option value="Ø£Ø³ÙˆØ¯" data-ar="Ø£Ø³ÙˆØ¯" data-en="Black">Ø£Ø³ÙˆØ¯</option>
        <option value="Ø£Ø¨ÙŠØ¶" data-ar="Ø£Ø¨ÙŠØ¶" data-en="White">Ø£Ø¨ÙŠØ¶</option>
        <option value="Ø¨Ù†ÙØ³Ø¬ÙŠ" data-ar="Ø¨Ù†ÙØ³Ø¬ÙŠ" data-en="Purple">Ø¨Ù†ÙØ³Ø¬ÙŠ</option>
      </select>
      <select class="specs" onchange="updatePrice(this, 'price2', {'Ø£Ø³ÙˆØ¯': 39000, 'Ø£Ø¨ÙŠØ¶': 39500, 'Ø¨Ù†ÙØ³Ø¬ÙŠ': 40000})">
        <option disabled selected value="" data-ar="Ø§Ø®ØªØ± Ø§Ù„Ø±Ø§Ù… ÙˆØ§Ù„Ù…Ø³Ø§Ø­Ø©" data-en="Choose RAM and Storage">Ø§Ø®ØªØ± Ø§Ù„Ø±Ø§Ù… ÙˆØ§Ù„Ù…Ø³Ø§Ø­Ø©</option>
        <option value="6GB/128GB">6GB / 128GB</option>
        <option value="8GB/256GB">8GB / 256GB</option>
      </select>
      <div id="price2" class="price" data-ar="Ø§Ù„Ø³Ø¹Ø±: -" data-en="Price: -">Ø§Ù„Ø³Ø¹Ø±: -</div>
      <button onclick="buyNow('iPhone 14')" data-ar="Ø´Ø±Ø§Ø¡ Ø§Ù„Ø¢Ù†" data-en="Buy Now">Ø´Ø±Ø§Ø¡ Ø§Ù„Ø¢Ù†</button>
    </div>

    <!-- iPhone 14 Plus -->
    <div class="phone">
      <img src="14-red-1662901725.jpg" alt="iPhone 14 Plus">
      <h2>
        <a href="product.html?model=iPhone%2014%20Plus"
           data-ar="Ø¢ÙŠÙÙˆÙ† 14 Ø¨Ù„Ø³"
           data-en="iPhone 14 Plus"
           style="text-decoration: none; color: inherit;">
          iPhone 14 Plus
        </a>
      </h2>
      <select class="color-select" onchange="updatePrice(this, 'price3', {'Ø£Ø®Ø¶Ø±': 42000, 'Ø£Ø²Ø±Ù‚': 42500, 'Ø°Ù‡Ø¨ÙŠ': 43500})">
        <option disabled selected value="" data-ar="Ø§Ø®ØªØ± Ø§Ù„Ù„ÙˆÙ†" data-en="Choose Color">Ø§Ø®ØªØ± Ø§Ù„Ù„ÙˆÙ†</option>
        <option value="Ø£Ø®Ø¶Ø±" data-ar="Ø£Ø®Ø¶Ø±" data-en="Green">Ø£Ø®Ø¶Ø±</option>
        <option value="Ø£Ø²Ø±Ù‚" data-ar="Ø£Ø²Ø±Ù‚" data-en="Blue">Ø£Ø²Ø±Ù‚</option>
        <option value="Ø°Ù‡Ø¨ÙŠ" data-ar="Ø°Ù‡Ø¨ÙŠ" data-en="Gold">Ø°Ù‡Ø¨ÙŠ</option>
      </select>
      <select class="specs" onchange="updatePrice(this, 'price3', {'Ø£Ø®Ø¶Ø±': 42000, 'Ø£Ø²Ø±Ù‚': 42500, 'Ø°Ù‡Ø¨ÙŠ': 43500})">
        <option disabled selected value="" data-ar="Ø§Ø®ØªØ± Ø§Ù„Ø±Ø§Ù… ÙˆØ§Ù„Ù…Ø³Ø§Ø­Ø©" data-en="Choose RAM and Storage">Ø§Ø®ØªØ± Ø§Ù„Ø±Ø§Ù… ÙˆØ§Ù„Ù…Ø³Ø§Ø­Ø©</option>
        <option value="6GB/128GB">6GB / 128GB</option>
        <option value="8GB/256GB">8GB / 256GB</option>
      </select>
      <div id="price3" class="price" data-ar="Ø§Ù„Ø³Ø¹Ø±: -" data-en="Price: -">Ø§Ù„Ø³Ø¹Ø±: -</div>
      <button onclick="buyNow('iPhone 14 Plus')" data-ar="Ø´Ø±Ø§Ø¡ Ø§Ù„Ø¢Ù†" data-en="Buy Now">Ø´Ø±Ø§Ø¡ Ø§Ù„Ø¢Ù†</button>
    </div>

  </div>
  <!-- Added new phones -->
  <div class="phone-container">
  <div class="phone">
    <img src="iphone-15-pro-natural_natural_titanium_5.jpg" alt="iPhone 15 Pro Max">
    <h2>
      <a href="product.html?model=iPhone%2015%20Pro%20Max"
         data-ar="Ø¢ÙŠÙÙˆÙ† 15 Ø¨Ø±Ùˆ Ù…Ø§ÙƒØ³"
         data-en="iPhone 15 Pro Max"
         style="text-decoration: none; color: inherit;">
        iPhone 15 Pro Max
      </a>
    </h2>
    <select class="color-select" onchange="updatePrice(this, 'price4', {'Ø°Ù‡Ø¨ÙŠ': 55000, 'ÙØ¶ÙŠ': 56000, 'Ø£Ø³ÙˆØ¯': 57000})">
      <option disabled selected value="" data-ar="Ø§Ø®ØªØ± Ø§Ù„Ù„ÙˆÙ†" data-en="Choose Color">Ø§Ø®ØªØ± Ø§Ù„Ù„ÙˆÙ†</option>
      <option value="Ø°Ù‡Ø¨ÙŠ" data-ar="Ø°Ù‡Ø¨ÙŠ" data-en="Gold">Ø°Ù‡Ø¨ÙŠ</option>
      <option value="ÙØ¶ÙŠ" data-ar="ÙØ¶ÙŠ" data-en="Silver">ÙØ¶ÙŠ</option>
      <option value="Ø£Ø³ÙˆØ¯" data-ar="Ø£Ø³ÙˆØ¯" data-en="Black">Ø£Ø³ÙˆØ¯</option>
    </select>
    <select class="specs" onchange="updatePrice(this, 'price4', {'Ø°Ù‡Ø¨ÙŠ': 55000, 'ÙØ¶ÙŠ': 56000, 'Ø£Ø³ÙˆØ¯': 57000})">
      <option disabled selected value="" data-ar="Ø§Ø®ØªØ± Ø§Ù„Ø±Ø§Ù… ÙˆØ§Ù„Ù…Ø³Ø§Ø­Ø©" data-en="Choose RAM and Storage">Ø§Ø®ØªØ± Ø§Ù„Ø±Ø§Ù… ÙˆØ§Ù„Ù…Ø³Ø§Ø­Ø©</option>
      <option value="8GB/256GB">8GB / 256GB</option>
      <option value="12GB/512GB">12GB / 512GB</option>
    </select>
    <div id="price4" class="price" data-ar="Ø§Ù„Ø³Ø¹Ø±: -" data-en="Price: -">Ø§Ù„Ø³Ø¹Ø±: -</div>
    <button onclick="buyNow('iPhone 15 Pro Max')" data-ar="Ø´Ø±Ø§Ø¡ Ø§Ù„Ø¢Ù†" data-en="Buy Now">Ø´Ø±Ø§Ø¡ Ø§Ù„Ø¢Ù†</button>
  </div>

  <div class="phone">
    <img src="iphone-16-pro-max-black.jpg" alt="iPhone 16">
    <h2>
      <a href="product.html?model=iPhone%2016"
         data-ar="Ø¢ÙŠÙÙˆÙ† 16"
         data-en="iPhone 16"
         style="text-decoration: none; color: inherit;">
        iPhone 16
      </a>
    </h2>
    <select class="color-select" onchange="updatePrice(this, 'price5', {'Ø£Ø²Ø±Ù‚': 60000, 'Ø£Ø®Ø¶Ø±': 61000, 'Ø±Ù…Ø§Ø¯ÙŠ': 62000})">
      <option disabled selected value="" data-ar="Ø§Ø®ØªØ± Ø§Ù„Ù„ÙˆÙ†" data-en="Choose Color">Ø§Ø®ØªØ± Ø§Ù„Ù„ÙˆÙ†</option>
      <option value="Ø£Ø²Ø±Ù‚" data-ar="Ø£Ø²Ø±Ù‚" data-en="Blue">Ø£Ø²Ø±Ù‚</option>
      <option value="Ø£Ø®Ø¶Ø±" data-ar="Ø£Ø®Ø¶Ø±" data-en="Green">Ø£Ø®Ø¶Ø±</option>
      <option value="Ø±Ù…Ø§Ø¯ÙŠ" data-ar="Ø±Ù…Ø§Ø¯ÙŠ" data-en="Gray">Ø±Ù…Ø§Ø¯ÙŠ</option>
    </select>
    <select class="specs" onchange="updatePrice(this, 'price5', {'Ø£Ø²Ø±Ù‚': 60000, 'Ø£Ø®Ø¶Ø±': 61000, 'Ø±Ù…Ø§Ø¯ÙŠ': 62000})">
      <option disabled selected value="" data-ar="Ø§Ø®ØªØ± Ø§Ù„Ø±Ø§Ù… ÙˆØ§Ù„Ù…Ø³Ø§Ø­Ø©" data-en="Choose RAM and Storage">Ø§Ø®ØªØ± Ø§Ù„Ø±Ø§Ù… ÙˆØ§Ù„Ù…Ø³Ø§Ø­Ø©</option>
      <option value="8GB/256GB">8GB / 256GB</option>
      <option value="12GB/512GB">12GB / 512GB</option>
    </select>
    <div id="price5" class="price" data-ar="Ø§Ù„Ø³Ø¹Ø±: -" data-en="Price: -">Ø§Ù„Ø³Ø¹Ø±: -</div>
    <button onclick="buyNow('iPhone 16')" data-ar="Ø´Ø±Ø§Ø¡ Ø§Ù„Ø¢Ù†" data-en="Buy Now">Ø´Ø±Ø§Ø¡ Ø§Ù„Ø¢Ù†</button>
  </div>

  <div class="phone">
    <img src="iPhone_16_Pink_PDP_Image_Position_1__en-WW.jpg" alt="iPhone 16 Pro">
    <h2>
      <a href="product.html?model=iPhone%2016%20Pro"
         data-ar="Ø¢ÙŠÙÙˆÙ† 16 Ø¨Ø±Ùˆ"
         data-en="iPhone 16 Pro"
         style="text-decoration: none; color: inherit;">
        iPhone 16 Pro
      </a>
    </h2>
    <select class="color-select" onchange="updatePrice(this, 'price6', {'ÙØ¶ÙŠ': 65000, 'Ø°Ù‡Ø¨ÙŠ': 66000, 'Ø£Ø³ÙˆØ¯': 67000})">
      <option disabled selected value="" data-ar="Ø§Ø®ØªØ± Ø§Ù„Ù„ÙˆÙ†" data-en="Choose Color">Ø§Ø®ØªØ± Ø§Ù„Ù„ÙˆÙ†</option>
      <option value="ÙØ¶ÙŠ" data-ar="ÙØ¶ÙŠ" data-en="Silver">ÙØ¶ÙŠ</option>
      <option value="Ø°Ù‡Ø¨ÙŠ" data-ar="Ø°Ù‡Ø¨ÙŠ" data-en="Gold">Ø°Ù‡Ø¨ÙŠ</option>
      <option value="Ø£Ø³ÙˆØ¯" data-ar="Ø£Ø³ÙˆØ¯" data-en="Black">Ø£Ø³ÙˆØ¯</option>
    </select>
    <select class="specs" onchange="updatePrice(this, 'price6', {'ÙØ¶ÙŠ': 65000, 'Ø°Ù‡Ø¨ÙŠ': 66000, 'Ø£Ø³ÙˆØ¯': 67000})">
      <option disabled selected value="" data-ar="Ø§Ø®ØªØ± Ø§Ù„Ø±Ø§Ù… ÙˆØ§Ù„Ù…Ø³Ø§Ø­Ø©" data-en="Choose RAM and Storage">Ø§Ø®ØªØ± Ø§Ù„Ø±Ø§Ù… ÙˆØ§Ù„Ù…Ø³Ø§Ø­Ø©</option>
      <option value="12GB/512GB">12GB / 512GB</option>
      <option value="16GB/1TB">16GB / 1TB</option>
    </select>
    <div id="price6" class="price" data-ar="Ø§Ù„Ø³Ø¹Ø±: -" data-en="Price: -">Ø§Ù„Ø³Ø¹Ø±: -</div>
    <button onclick="buyNow('iPhone 16 Pro')" data-ar="Ø´Ø±Ø§Ø¡ Ø§Ù„Ø¢Ù†" data-en="Buy Now">Ø´Ø±Ø§Ø¡ Ø§Ù„Ø¢Ù†</button>
  </div>
  
  
    <button id="cart-button" onclick="toggleCart()" style="position: fixed; top: 20px; left: 30px; z-index: 999; background-color: #0071e3; color: white; border: none; padding: 10px 20px; border-radius: 8px; font-size: 16px; cursor: pointer; box-shadow: 0 4px 8px rgba(0,0,0,0.2);">
      ğŸ›’ <span data-ar="Ø§Ù„Ø³Ù„Ø©" data-en="Cart">Ø§Ù„Ø³Ù„Ø©</span> (<span id="cart-count">0</span>)
    </button>
    
  <div id="cart" style="display:none; position:fixed; top:70px; left:20px; background:white; padding:20px; border-radius:10px; box-shadow:0 0 10px rgba(168, 16, 16, 0.2); max-width:300px; z-index: 999;">
    <h3> ğŸ›’ <span data-ar="Ø³Ù„Ø© Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª" data-en="Shopping Cart">Ø³Ù„Ø© Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª</span></h3>
    <ul id="cart-items"></ul>
    <p><strong><span data-ar="Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ:" data-en="Total:">Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ:</span> </strong><span id="cart-total">0</span> <span data-ar="Ø¬Ù†ÙŠÙ‡" data-en="EGP">Ø¬Ù†ÙŠÙ‡</span></p>
    <button onclick="window.location.href='checkout.html'">
      <span data-ar="Ø§ØªÙ…Ø§Ù… Ø§Ù„Ø´Ø±Ø§Ø¡" data-en="Checkout">Ø§ØªÙ…Ø§Ù… Ø§Ù„Ø´Ø±Ø§Ø¡</span>
    </button>
      </div>
  
  <script>
    document.addEventListener('DOMContentLoaded', function() {
  // Existing disabling buttons...
  // â€”â€”
  // Ø«Ù…:
  const saved = JSON.parse(localStorage.getItem('cartItems')) || [];
  cart.items = saved;
  cart.updateCartUI();
});

    // Add prices for new models
    const additionalPrices = {
  'iPhone 15': {
    'Ø£Ø³ÙˆØ¯': {
      '6GB/128GB': 43000,
      '8GB/256GB': 45000
    },
    'Ø£Ø²Ø±Ù‚': {
      '6GB/128GB': 44000,
      '8GB/256GB': 46000
    },
    'Ø£Ø­Ù…Ø±': {
      '6GB/128GB': 45000,
      '8GB/256GB': 47000
    }
  },
  'iPhone 14': {
    'Ø£Ø³ÙˆØ¯': {
      '6GB/128GB': 39000,
      '8GB/256GB': 41000
    },
    'Ø£Ø¨ÙŠØ¶': {
      '6GB/128GB': 39500,
      '8GB/256GB': 41500
    },
    'Ø¨Ù†ÙØ³Ø¬ÙŠ': {
      '6GB/128GB': 40000,
      '8GB/256GB': 42000
    }
  },
  'iPhone 14 Plus': {
    'Ø£Ø®Ø¶Ø±': {
      '6GB/128GB': 42000,
      '8GB/256GB': 44000
    },
    'Ø£Ø²Ø±Ù‚': {
      '6GB/128GB': 42500,
      '8GB/256GB': 44500
    },
    'Ø°Ù‡Ø¨ÙŠ': {
      '6GB/128GB': 43500,
      '8GB/256GB': 45500
    }
  },
  'iPhone 15 Pro Max': {
    'Ø°Ù‡Ø¨ÙŠ': {
      '8GB/256GB': 55000,
      '12GB/512GB': 57000
    },
    'ÙØ¶ÙŠ': {
      '8GB/256GB': 56000,
      '12GB/512GB': 58000
    },
    'Ø£Ø³ÙˆØ¯': {
      '8GB/256GB': 57000,
      '12GB/512GB': 59000
    }
  },
  'iPhone 16': {
    'Ø£Ø²Ø±Ù‚': {
      '8GB/256GB': 60000,
      '12GB/512GB': 62000
    },
    'Ø£Ø®Ø¶Ø±': {
      '8GB/256GB': 61000,
      '12GB/512GB': 63000
    },
    'Ø±Ù…Ø§Ø¯ÙŠ': {
      '8GB/256GB': 62000,
      '12GB/512GB': 64000
    }
  },
  'iPhone 16 Pro': {
    'ÙØ¶ÙŠ': {
      '12GB/512GB': 65000,
      '16GB/1TB': 67000
    },
    'Ø°Ù‡Ø¨ÙŠ': {
      '12GB/512GB': 66000,
      '16GB/1TB': 68000
    },
    'Ø£Ø³ÙˆØ¯': {
      '12GB/512GB': 67000,
      '16GB/1TB': 69000
    }
  }
};

  </script>

  <!-- Firebase App (the core Firebase SDK) -->
  <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
  <!-- Firebase Authentication -->
  <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-auth-compat.js"></script>

  <script>
    // Your web app's Firebase configuration
    const firebaseConfig = {
      apiKey: "AIzaSyBswHiY9SZQGdsiEX6BpPYoZOrc-dJi5rM",
      authDomain: "picknclick-3e1c8.firebaseapp.com",
      projectId: "picknclick-3e1c8",
      storageBucket: "picknclick-3e1c8.appspot.com",
      messagingSenderId: "66839865979",
      appId: "1:66839865979:web:53db8779abf7ea03e5d0de",
      measurementId: "G-RHJ96QLZTK"
    };

    // Initialize Firebase using compat SDK
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    auth.setPersistence(firebase.auth.Auth.Persistence.SESSION);

    // Check auth state and update UI
    auth.onAuthStateChanged(user => {
  const langToggle = document.querySelector('.lang-toggle');
  if (user) {
    // User is signed in
    if (!document.getElementById('user-info')) {
      const userInfo = document.createElement('div');
      userInfo.id = 'user-info';
      userInfo.style.position = 'fixed';
      userInfo.style.top = '20px';
      userInfo.style.right = '20px';
      userInfo.style.backgroundColor = '#0071e3';
      userInfo.style.color = 'white';
      userInfo.style.padding = '10px 15px';
      userInfo.style.borderRadius = '8px';
      userInfo.style.cursor = 'pointer';
      userInfo.title = 'ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬';
      userInfo.textContent = user.email;
      userInfo.onclick = () => {
        auth.signOut();
      };
      document.body.appendChild(userInfo);
    }
  } else {
    // User is signed out
    const userInfo = document.getElementById('user-info');
    if (userInfo) {
      userInfo.remove();
    }
    window.location.href = "login.html";
  }
});
    auth.onAuthStateChanged(user => {
      if (!user) {
        // Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† Ù…Ø³Ø¬Ù„Ø§Ù‹ Ø§Ù„Ø¯Ø®ÙˆÙ„ØŒ Ø§Ø±Ø¬Ø¹ Ø¨Ù‡ Ù„ØµÙØ­Ø© Ø§Ù„ØªØ³Ø¬ÙŠÙ„
        window.location.href = "login.html";
      }
    });

    // Implement buyNow function to add item to cart
    const cart = {
      items: [],
      addItem(item) {
        this.items.push(item);
        this.updateCartUI();
      },
      updateCartUI() {
        const cartItemsElem = document.getElementById('cart-items');
        const cartCountElem = document.getElementById('cart-count');
        const cartTotalElem = document.getElementById('cart-total');
        cartItemsElem.innerHTML = '';
        let total = 0;
        this.items.forEach((item, index) => {
          const li = document.createElement('li');
          li.textContent = `${item.model} - ${item.color} - ${item.specs} - ${item.price} ${document.documentElement.lang === 'ar' ? 'Ø¬Ù†ÙŠÙ‡' : 'EGP'}`;
          // Add remove button for each item
          const removeBtn = document.createElement('button');
          removeBtn.textContent = document.documentElement.lang === 'ar' ? 'Ø­Ø°Ù' : 'Remove';
          removeBtn.style.marginLeft = '10px';
          removeBtn.onclick = () => {
            this.items.splice(index, 1);
            this.updateCartUI();
          };
          li.appendChild(removeBtn);
          cartItemsElem.appendChild(li);
          total += item.price;
        });
        cartCountElem.textContent = this.items.length;
        cartTotalElem.textContent = total;
      },
      clear() {
        this.items = [];
        this.updateCartUI();
      }
    };
// ØªÙØ¹ÙŠÙ„/ØªØ¹Ø·ÙŠÙ„ Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø´Ø±Ø§Ø¡ Ø¹Ù†Ø¯ Ø§Ù„ØªØ­Ù…ÙŠÙ„
document.addEventListener('DOMContentLoaded', function() {
  document.querySelectorAll('.phone button[onclick^="buyNow"]').forEach(btn => {
    btn.disabled = true;
  });
});

    function buyNow(model) {
      if (!auth.currentUser) {
        alert('ÙŠØ±Ø¬Ù‰ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø£ÙˆÙ„Ø§Ù‹ Ù„Ù„Ø´Ø±Ø§Ø¡.');
        window.location.href = 'login.html';
        return;
      }
      // Find the phone div for the model
      const phones = document.querySelectorAll('.phone');
      let phoneDiv = null;
      phones.forEach(phone => {
        const h2 = phone.querySelector('h2');
        const h2Text = h2 ? h2.textContent.trim() : '';
        const aText = h2 && h2.querySelector('a') ? h2.querySelector('a').textContent.trim() : '';
        if (h2Text === model || aText === model) {
          phoneDiv = phone;
        }
      });
      if (!phoneDiv) {
        alert(document.documentElement.lang === 'ar' ? 'Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ù‡Ø§ØªÙ.' : 'Phone not found.');
        return;
      }
      const colorSelect = phoneDiv.querySelector('.color-select');
      const specsSelect = phoneDiv.querySelector('.specs');
      const priceDiv = phoneDiv.querySelector('.price');
      const color = colorSelect.value;
      const specs = specsSelect.value;
      const price = priceDiv.dataset.price;
      if (!color) {
        alert(document.documentElement.lang === 'ar' ? 'ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù„ÙˆÙ†.' : 'Please select a color.');
        return;
      }
      if (!specs) {
        alert(document.documentElement.lang === 'ar' ? 'ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø±Ø§Ù… ÙˆØ§Ù„Ù…Ø³Ø§Ø­Ø©.' : 'Please select RAM and Storage.');
        return;
      }
      if (!price) {
        alert(document.documentElement.lang === 'ar' ? 'Ø§Ù„Ø³Ø¹Ø± ØºÙŠØ± Ù…ØªÙˆÙØ±.' : 'Price not available.');
        return;
      }
      // Get price from data attribute instead of parsing text
      const item = { model, color, specs, price: parseInt(price) };
      // Add item to cart
      cart.addItem(item);
      addToCart(item);
    }

    function updatePrice(selectElem, priceId) {
  const phoneDiv = selectElem.closest('.phone');
  const colorSelect = phoneDiv.querySelector('.color-select');
  const specsSelect = phoneDiv.querySelector('.specs');
  const color = colorSelect.value;
  const specs = specsSelect.value;
  const priceDiv = document.getElementById(priceId);
  
  // Ø§Ø­ØµÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ù…Ù† Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù‡Ø§ØªÙ
  const model = phoneDiv.querySelector('h2').textContent.trim();
  
  if (color && specs && additionalPrices[model] && additionalPrices[model][color] && additionalPrices[model][color][specs]) {
    const price = additionalPrices[model][color][specs];
    priceDiv.textContent = (document.documentElement.lang === 'ar' ? 'Ø§Ù„Ø³Ø¹Ø±: ' : 'Price: ') + price;
    priceDiv.dataset.price = price;
    // ØªÙØ¹ÙŠÙ„ Ø²Ø± Ø§Ù„Ø´Ø±Ø§Ø¡
    const buyBtn = phoneDiv.querySelector('button[onclick^="buyNow"]');
    if (buyBtn) buyBtn.disabled = false;
  } else {
    priceDiv.textContent = (document.documentElement.lang === 'ar' ? 'Ø§Ù„Ø³Ø¹Ø±: -' : 'Price: -');
    priceDiv.dataset.price = '';
    // ØªØ¹Ø·ÙŠÙ„ Ø²Ø± Ø§Ù„Ø´Ø±Ø§Ø¡
    const buyBtn = phoneDiv.querySelector('button[onclick^="buyNow"]');
    if (buyBtn) buyBtn.disabled = true;
  }
}

    function toggleCart() {
      console.log('toggleCart called');
      const cart = document.getElementById('cart');
      if (!cart) {
        console.error('Cart element not found');
        return;
      }
      console.log('Current cart display:', cart.style.display);
      if (cart.style.display === 'none' || cart.style.display === '') {
        cart.style.display = 'block';
        console.log('Cart shown');
      } else {
        cart.style.display = 'none';
        console.log('Cart hidden');
      }
    }

    // ÙÙŠ Ø¯Ø§Ù„Ø© buyNow Ø£Ùˆ Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø²Ø± Ø§ØªÙ…Ø§Ù… Ø§Ù„Ø´Ø±Ø§Ø¡
function proceedToCheckout() {
  const cartItems = JSON.parse(localStorage.getItem('cartItems')) || [];
  if (cartItems.length === 0) {
    alert('Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©!');
    return;
  }
  window.location.href = 'checkout.html';
}

  function getCartItemCount() {
    // Ù…Ø«Ø§Ù„: Ø¬Ù„Ø¨ Ø¹Ø¯Ø¯ Ø§Ù„Ø¹Ù†Ø§ØµØ± Ù…Ù† localStorage Ø£Ùˆ Ù…Ù† Ø¹Ù†ØµØ± ÙÙŠ Ø§Ù„ØµÙØ­Ø©
    const cart = JSON.parse(localStorage.getItem('cartItems')) || [];
    return cart.length;
    
  }

  function addToCart(product) {
  let cart = JSON.parse(localStorage.getItem('cartItems')) || [];
  cart.push(product);
  localStorage.setItem('cartItems', JSON.stringify(cart));
}


  </script>

<button id="logout-btn" style="position: fixed; bottom: 20px; left: 30px; background: #ff3b30; color: white; border: none; padding: 10px 15px; border-radius: 8px; cursor: pointer;">
  ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬
</button>

<script>
  document.getElementById('logout-btn').onclick = function() {
    firebase.auth().signOut().then(() => {
      window.location.href = "login.html";
    });
  };
</script>
  <script>
    function toggleLang() {
      const isArabic = document.documentElement.lang === 'ar';
      document.documentElement.lang = isArabic ? 'en' : 'ar';
      document.documentElement.dir = isArabic ? 'ltr' : 'rtl';
      document.querySelector('.lang-toggle').textContent = isArabic ? 'Ø¹Ø±Ø¨ÙŠ' : 'English';
      document.querySelectorAll('[data-ar]').forEach(el => {
        el.textContent = isArabic ? el.dataset.en : el.dataset.ar;
      });
    }
  </script>
    <footer>
      &copy; 2025 Pick&Click. All rights reserved.
  </footer>
</body>
</html>
